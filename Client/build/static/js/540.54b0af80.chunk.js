"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[540],{1100:function(e,n,r){r.r(n),r.d(n,{default:function(){return x}});var l=r(4165),t=r(1413),i=r(5861),s=r(9439),o=r(2791),a=(r.p,r(9806)),c=r(1632),d=r(5403),u=r(2373),m=r(7689),p=r(6148),h=r(1134),v=r(184),x=function(){var e,n,r,x,b,f,N=(0,m.TH)().state,g=(0,h.cI)({onChange:!0}),j=g.register,y=(g.reset,g.handleSubmit),Z=g.formState.errors,S=(0,o.useRef)(null),w=(0,o.useRef)(null),k=(0,u.Z)(),F=(0,o.useState)(!1),E=(0,s.Z)(F,2),I=E[0],O=E[1],R=(0,o.useState)({}),q=(0,s.Z)(R,2),A=q[0],T=q[1],_=(0,o.useState)({}),C=(0,s.Z)(_,2),M=C[0],P=C[1],z="SIGNUP_FORM",G="USER_TYPES_FORM",J="PATIENT_FORM",L="ORGANIZATION_FORM",X=(0,o.useState)(z),U=(0,s.Z)(X,2),B=U[0],H=U[1],D=(0,o.useState)([]),V=(0,s.Z)(D,2),Y=V[0],K=V[1],Q=(0,o.useState)({name:"",phone:"",age:"",gender:""}),W=(0,s.Z)(Q,2),$=W[0],ee=W[1];(0,o.useEffect)((function(){ie()}),[]);var ne=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(n){var r,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=4;break}return k.error("Enter number"),e.abrupt("return");case 4:return e.next=6,d.be.post("/signup",(0,t.Z)((0,t.Z)({},$),{},{phone:n}));case 6:r=e.sent,i=r.data,T(null===i||void 0===i?void 0:i.user),ee((0,t.Z)((0,t.Z)({},$),{},{phone:n})),O(!0),411===(null===i||void 0===i?void 0:i.status_code)?k.error(null===i||void 0===i?void 0:i.message):k.success(null===i||void 0===i?void 0:i.message),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),k.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){var n,r,t,i,s,o,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.be.post("/validate-otp",{otp:w.current.value,userId:null===A||void 0===A?void 0:A._id});case 3:i=e.sent,s=i.data,localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),localStorage.setItem("token",JSON.stringify(null===s||void 0===s?void 0:s.token)),null!==s&&void 0!==s&&null!==(n=s.user)&&void 0!==n&&null!==(r=n.twoFactor)&&void 0!==r&&r.isVerified&&null!==s&&void 0!==s&&null!==(t=s.user)&&void 0!==t&&t.isActive?null!==N&&void 0!==N&&N.redirectTo?window.location.replace(N.redirectTo):window.location.replace(null===(o=p._A[null===s||void 0===s||null===(a=s.user)||void 0===a?void 0:a.userType])||void 0===o?void 0:o.path):H(G),k.success(null===s||void 0===s?void 0:s.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),k.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(n){var r,t,i,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.be.post("/common/set-usertype",{type:n,userId:A._id,organizationId:null===A||void 0===A?void 0:A.organizationId},(0,d.Ek)());case 3:i=e.sent,s=i.data,P(n),localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),"patient"===n?H(J):["hospital","clinic"].includes(n)?H(L):window.location.replace(null===(r=p._A[null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.userType])||void 0===r?void 0:r.path),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(n){var r,t,i,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.phone=A.phone,!["hospital","clinic"].includes(n.source)){e.next=11;break}return n.isLogin=!0,e.next=6,d.be.post("common/create-hospital",n,(0,d.Ek)());case 6:r=e.sent,null!==(t=r.data)&&void 0!==t&&t.isActive&&(localStorage.setItem("user",JSON.stringify(null===t||void 0===t?void 0:t.organization)),window.location.reload()),e.next=18;break;case 11:if("patient"!==n.source){e.next=18;break}return n._id=null===A||void 0===A?void 0:A._id,e.next=15,d.be.post("/patient/patient-details",n,(0,d.Ek)());case 15:i=e.sent,null!==(s=i.data)&&void 0!==s&&s.isActive&&(localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),null!==N&&void 0!==N&&N.redirectTo?window.location.replace(N.redirectTo):window.location.replace("/patient"));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Jx)();case 2:n=e.sent,console.log(">>>>>>>>>>",n.data.images),K(n.data.images);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{style:{backgroundImage:"url(".concat(function(e){var n;return(0,d.a9)(null===(n=Y.find((function(n){return n.id===e})))||void 0===n?void 0:n.image)}(p.p5.LOGIN_BANNER),")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},className:"loginContainer",children:[B===z&&(0,v.jsxs)("div",{className:"loginform col-3 d-flex flex-column",children:[(0,v.jsx)("span",{className:"h2 text-light mb-3",children:"LogIn / Sign Up"}),I?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"mobile",children:[(0,v.jsx)("p",{className:"mb-1 text-disabled",children:"Mobile Number"}),(0,v.jsxs)("h3",{children:["+91"," ","".concat(String((null===$||void 0===$?void 0:$.phone)||"").slice(0,2),"-").concat(String((null===$||void 0===$?void 0:$.phone)||"").slice(2,4),"-").concat(String((null===$||void 0===$?void 0:$.phone)||"").slice(4,6),"-").concat(String((null===$||void 0===$?void 0:$.phone)||"").slice(6,10)),(0,v.jsx)("span",{children:(0,v.jsx)(a.G,{onClick:function(){O(!1)},className:"cursor-pointer medit ml-1 text",icon:c.Xcf})})]})]}),(0,v.jsxs)("div",{className:"otp mt-2",children:[(0,v.jsx)("label",{htmlFor:"",className:"text-disabled",children:"Enter the OTP"}),(0,v.jsx)("input",{className:"form-control mt-2 letterSpcing",type:"text",maxLength:10,name:"OTP",id:"",placeholder:"X X X X",ref:w}),(0,v.jsx)("button",{onClick:re,className:"btn btn-light btn1 mt-4",children:"Log In"})]})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{className:"mb-2",htmlFor:"Phone",children:"Mobile Number"}),(0,v.jsx)("input",{id:"Phone",className:"form-control mb-2 letterSpcing",type:"text",maxLength:10,pattern:"###-###-####",placeholder:"822992255",ref:S,onChange:d.y4}),(0,v.jsx)("span",{children:(0,v.jsx)("button",{onClick:function(){return ne(S.current.value)},className:"btn btn-light btn1",children:"Submit"})})]})]}),B===G&&(0,v.jsxs)("div",{className:"loginform mt-0 user-details ",children:[(0,v.jsx)("h4",{className:"py-3",children:"Select Anyone "}),(0,v.jsxs)("div",{className:"col-3 d-flex flex-column justify-content-center",children:[(0,v.jsxs)("div",{className:"col mb-3 p-3 text-center cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return le("patient")},children:[(0,v.jsx)("span",{children:"To Book Appointments"}),(0,v.jsx)("br",{}),"Patient"]}),(0,v.jsxs)("div",{className:"col text-center p-3 cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return le("hospital")},children:[(0,v.jsx)("span",{children:"Only for \xa0"}),"\xa0Hospitals"]}),(0,v.jsxs)("div",{className:"col p-3 text-center my-3 cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return le("clinic")},children:[(0,v.jsx)("span",{children:"Only for\xa0"}),"\xa0Clinics"]})]})]}),(0,v.jsxs)("form",{onSubmit:y(te),children:[B===J&&(0,v.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,v.jsx)("h3",{className:"mb-3",children:"Fill your Details"}),(0,v.jsxs)("div",{className:"mb-2",children:[(0,v.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,v.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===$||void 0===$||null===(e=$.phone)||void 0===e?void 0:e.slice(0,3),"-",null===$||void 0===$||null===(n=$.phone)||void 0===n?void 0:n.slice(3,6),"-",null===$||void 0===$||null===(r=$.phone)||void 0===r?void 0:r.slice(-4)]})]}),(0,v.jsxs)("div",{className:"col-12",children:[(0,v.jsx)("input",(0,t.Z)({type:"hidden",value:"patient"},j("source"))),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"",className:"mb-2",children:"Full Name"}),(0,v.jsx)("input",(0,t.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.name?"border-danger":""),placeholder:"Enter Full name"},j("name",{required:"name is required"})))]})]}),(0,v.jsxs)("div",{className:"col-12 d-flex flex-row",children:[(0,v.jsxs)("div",{className:"col-6 me-2",children:[(0,v.jsx)("label",{htmlFor:"",className:"mb-2",children:"Age"}),(0,v.jsx)("input",(0,t.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.age?"border-danger":""),placeholder:"Enter age"},j("age",{required:"age is required"})))]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"",className:"mb-2",children:"Gender"}),(0,v.jsxs)("select",(0,t.Z)((0,t.Z)({style:{padding:".475rem .75rem"},className:"form-control mb-2 col-2 w-100  ".concat(null!==Z&&void 0!==Z&&Z.age?"border-danger":"")},j("gender",{required:"Gender is required"})),{},{children:[(0,v.jsx)("option",{value:"male",children:"Male"}),(0,v.jsx)("option",{value:"female",children:"Female"}),(0,v.jsx)("option",{value:"other",children:"Other"})]}))]})]}),(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("label",{className:"mb-2",htmlFor:"",children:"Father name"}),(0,v.jsx)("input",(0,t.Z)({type:"text",className:"form-control mb-2 ",placeholder:"Enter Full name"},j("fatherName")))]}),(0,v.jsxs)("div",{className:" mb-3",children:[(0,v.jsx)("label",{className:"mb-2",htmlFor:"",children:"Address"}),(0,v.jsx)("input",(0,t.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.address?"border-danger":""),placeholder:"Enter Address"},j("address",{required:"address is required"})))]}),(0,v.jsx)("button",{className:"btn btn1 btn-info",type:"submit",children:"Save"})]}),B===L&&(0,v.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,v.jsx)("h3",{className:"mb-3",children:"Fill your details"}),(0,v.jsxs)("div",{className:"mb-2",children:[(0,v.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,v.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===$||void 0===$||null===(x=$.phone)||void 0===x?void 0:x.slice(0,3),"-",null===$||void 0===$||null===(b=$.phone)||void 0===b?void 0:b.slice(3,6),"-",null===$||void 0===$||null===(f=$.phone)||void 0===f?void 0:f.slice(-4)]})]}),(0,v.jsxs)("div",{className:"col-12",children:[(0,v.jsx)("div",{children:(0,v.jsx)("input",(0,t.Z)({type:"hidden",value:M,placeholder:"Enter Registration No."},j("source")))}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"mb-2",children:"Registration No."}),(0,v.jsx)("input",(0,t.Z)({type:"text",name:"registration no",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.registrationNo?"border-danger":""),placeholder:"Enter Registration No."},j("registrationNo",{required:"Email is required"})))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"mb-2",children:"Name"}),(0,v.jsx)("input",(0,t.Z)({type:"text",name:"name",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.name?"border-danger":""),placeholder:"Enter Full name"},j("name",{required:"Email is required"})))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{htmlFor:"",className:"mb-2",children:"Email"}),(0,v.jsx)("input",(0,t.Z)({type:"email",name:"email",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.email?"border-danger":""),placeholder:"Enter Email"},j("email",{required:"Email is required"})))]}),(0,v.jsx)("button",{className:"btn btn-primary btn-md shadow-none",type:"submit",children:"Save"})]})]})]})]})}}}]);
//# sourceMappingURL=540.54b0af80.chunk.js.map