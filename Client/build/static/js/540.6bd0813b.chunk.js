"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[540],{1100:function(e,n,l){l.r(n),l.d(n,{default:function(){return b}});var r=l(4165),i=l(1413),t=l(5861),s=l(9439),o=l(2791),a=l.p+"static/media/login.9b30f8860cee1206dc9a.jpg",c=l(9806),d=l(1632),u=l(5403),m=l(2373),p=l(7689),h=l(6148),v=l(1134),x=l(184),b=function(){var e,n,l,b,f,g,N=(0,p.TH)().state,j=(0,v.cI)({onChange:!0}),y=j.register,S=(j.reset,j.handleSubmit),Z=j.formState.errors,w=(0,o.useRef)(null),k=(0,o.useRef)(null),F=(0,m.Z)(),E=(0,o.useState)(!1),I=(0,s.Z)(E,2),R=I[0],q=I[1],O=(0,o.useState)({}),T=(0,s.Z)(O,2),A=T[0],C=T[1],_=(0,o.useState)({}),M=(0,s.Z)(_,2),P=M[0],z=M[1],G="SIGNUP_FORM",J="USER_TYPES_FORM",L="PATIENT_FORM",X="ORGANIZATION_FORM",U=(0,o.useState)(G),H=(0,s.Z)(U,2),D=H[0],V=H[1],Y=(0,o.useState)({name:"",phone:"",age:"",gender:""}),B=(0,s.Z)(Y,2),K=B[0],Q=B[1],W=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n){var l,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=4;break}return F.error("Enter number"),e.abrupt("return");case 4:return e.next=6,u.be.post("/signup",(0,i.Z)((0,i.Z)({},K),{},{phone:n}));case 6:l=e.sent,t=l.data,C(null===t||void 0===t?void 0:t.user),Q((0,i.Z)((0,i.Z)({},K),{},{phone:n})),q(!0),411===(null===t||void 0===t?void 0:t.status_code)?F.error(null===t||void 0===t?void 0:t.message):F.success(null===t||void 0===t?void 0:t.message),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),F.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){var n,l,i,t,s,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/validate-otp",{otp:k.current.value,userId:null===A||void 0===A?void 0:A._id});case 3:t=e.sent,s=t.data,localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),localStorage.setItem("token",JSON.stringify(null===s||void 0===s?void 0:s.token)),null!==s&&void 0!==s&&null!==(n=s.user)&&void 0!==n&&null!==(l=n.twoFactor)&&void 0!==l&&l.isVerified&&null!==s&&void 0!==s&&null!==(i=s.user)&&void 0!==i&&i.isActive?null!==N&&void 0!==N&&N.redirectTo?window.location.replace(N.redirectTo):window.location.replace(null===(o=h._A[null===s||void 0===s||null===(a=s.user)||void 0===a?void 0:a.userType])||void 0===o?void 0:o.path):V(J),F.success(null===s||void 0===s?void 0:s.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),F.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n){var l,i,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/common/set-usertype",{type:n,userId:A._id,organizationId:null===A||void 0===A?void 0:A.organizationId},(0,u.Ek)());case 3:t=e.sent,s=t.data,z(n),localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),"patient"===n?V(L):["hospital","clinic"].includes(n)?V(X):window.location.replace(null===(l=h._A[null===s||void 0===s||null===(i=s.user)||void 0===i?void 0:i.userType])||void 0===l?void 0:l.path),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n){var l,i,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.phone=A.phone,!["hospital","clinic"].includes(n.source)){e.next=11;break}return n.isLogin=!0,e.next=6,u.be.post("common/create-hospital",n,(0,u.Ek)());case 6:l=e.sent,null!==(i=l.data)&&void 0!==i&&i.isActive&&(localStorage.setItem("user",JSON.stringify(null===i||void 0===i?void 0:i.organization)),window.location.reload()),e.next=18;break;case 11:if("patient"!==n.source){e.next=18;break}return n._id=null===A||void 0===A?void 0:A._id,e.next=15,u.be.post("/patient/patient-details",n,(0,u.Ek)());case 15:t=e.sent,null!==(s=t.data)&&void 0!==s&&s.isActive&&(localStorage.setItem("user",JSON.stringify(null===s||void 0===s?void 0:s.user)),null!==N&&void 0!==N&&N.redirectTo?window.location.replace(N.redirectTo):window.location.replace("/patient"));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{style:{backgroundImage:"url(".concat(a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},className:"loginContainer",children:[D===G&&(0,x.jsxs)("div",{className:"loginform col-3 d-flex flex-column",children:[(0,x.jsx)("span",{className:"h2 text-light mb-3",children:"LogIn / Sign Up"}),R?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mobile",children:[(0,x.jsx)("p",{className:"mb-1 text-disabled",children:"Mobile Number"}),(0,x.jsxs)("h3",{children:["+91"," ","".concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(0,2),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(2,4),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(4,6),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(6,10)),(0,x.jsx)("span",{children:(0,x.jsx)(c.G,{onClick:function(){q(!1)},className:"cursor-pointer medit ml-1 text",icon:d.Xcf})})]})]}),(0,x.jsxs)("div",{className:"otp mt-2",children:[(0,x.jsx)("label",{htmlFor:"",className:"text-disabled",children:"Enter the OTP"}),(0,x.jsx)("input",{className:"form-control mt-2 letterSpcing",type:"text",maxLength:10,name:"OTP",id:"",placeholder:"X X X X",ref:k}),(0,x.jsx)("button",{onClick:$,className:"btn btn-light btn1 mt-4",children:"Log In"})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"Phone",children:"Mobile Number"}),(0,x.jsx)("input",{id:"Phone",className:"form-control mb-2 letterSpcing",type:"text",maxLength:10,pattern:"###-###-####",placeholder:"822992255",ref:w,onChange:u.y4}),(0,x.jsx)("span",{children:(0,x.jsx)("button",{onClick:function(){return W(w.current.value)},className:"btn btn-light btn1",children:"Submit"})})]})]}),D===J&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details ",children:[(0,x.jsx)("h4",{className:"py-3",children:"Select Anyone "}),(0,x.jsxs)("div",{className:"col-3 d-flex flex-column justify-content-center",children:[(0,x.jsx)("div",{className:"col text-center p-3 cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return ee("hospital")},children:"Hospital"}),(0,x.jsx)("div",{className:"col p-3 text-center my-3 cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return ee("clinic")},children:"Clinic"}),(0,x.jsx)("div",{className:"col p-3 text-center cursor-pointer",style:{fontSize:"15px",border:"1px solid white",width:"300px",borderRadius:"5px"},onClick:function(){return ee("patient")},children:"Patient"})]})]}),(0,x.jsxs)("form",{onSubmit:S(ne),children:[D===L&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,x.jsx)("h3",{className:"mb-3",children:"Fill your Details"}),(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,x.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===K||void 0===K||null===(e=K.phone)||void 0===e?void 0:e.slice(0,3),"-",null===K||void 0===K||null===(n=K.phone)||void 0===n?void 0:n.slice(3,6),"-",null===K||void 0===K||null===(l=K.phone)||void 0===l?void 0:l.slice(-4)]})]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("input",(0,i.Z)({type:"hidden",value:"patient"},y("source"))),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Full Name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.name?"border-danger":""),placeholder:"Enter Full name"},y("name",{required:"name is required"})))]})]}),(0,x.jsxs)("div",{className:"col-12 d-flex flex-row",children:[(0,x.jsxs)("div",{className:"col-6 me-2",children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Age"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.age?"border-danger":""),placeholder:"Enter age"},y("age",{required:"age is required"})))]}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Gender"}),(0,x.jsxs)("select",(0,i.Z)((0,i.Z)({style:{padding:".475rem .75rem"},className:"form-control mb-2 col-2 w-100  ".concat(null!==Z&&void 0!==Z&&Z.age?"border-danger":"")},y("gender",{required:"Gender is required"})),{},{children:[(0,x.jsx)("option",{value:"male",children:"Male"}),(0,x.jsx)("option",{value:"female",children:"Female"}),(0,x.jsx)("option",{value:"other",children:"Other"})]}))]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"",children:"Father name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ",placeholder:"Enter Full name"},y("fatherName")))]}),(0,x.jsxs)("div",{className:" mb-3",children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"",children:"Address"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.address?"border-danger":""),placeholder:"Enter Address"},y("address",{required:"address is required"})))]}),(0,x.jsx)("button",{className:"btn btn1 btn-info",type:"submit",children:"Save"})]}),D===X&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,x.jsx)("h3",{className:"mb-3",children:"Fill your details"}),(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,x.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===K||void 0===K||null===(b=K.phone)||void 0===b?void 0:b.slice(0,3),"-",null===K||void 0===K||null===(f=K.phone)||void 0===f?void 0:f.slice(3,6),"-",null===K||void 0===K||null===(g=K.phone)||void 0===g?void 0:g.slice(-4)]})]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,i.Z)({type:"hidden",value:P,placeholder:"Enter Registration No."},y("source")))}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-2",children:"Registration No."}),(0,x.jsx)("input",(0,i.Z)({type:"text",name:"registration no",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.registrationNo?"border-danger":""),placeholder:"Enter Registration No."},y("registrationNo",{required:"Email is required"})))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-2",children:"Name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",name:"name",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.name?"border-danger":""),placeholder:"Enter Full name"},y("name",{required:"Email is required"})))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Email"}),(0,x.jsx)("input",(0,i.Z)({type:"email",name:"email",className:"form-control mb-2 ".concat(null!==Z&&void 0!==Z&&Z.email?"border-danger":""),placeholder:"Enter Email"},y("email",{required:"Email is required"})))]}),(0,x.jsx)("button",{className:"btn btn-primary btn-md shadow-none",type:"submit",children:"Save"})]})]})]})]})}}}]);
//# sourceMappingURL=540.6bd0813b.chunk.js.map