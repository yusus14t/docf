"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[540],{1100:function(e,l,n){n.r(l),n.d(l,{default:function(){return b}});var r=n(4165),i=n(1413),s=n(5861),t=n(9439),o=n(2791),a=n.p+"static/media/login.9b30f8860cee1206dc9a.jpg",c=n(9806),d=n(1632),u=n(5403),m=n(2373),p=n(7689),v=n(6148),h=n(1134),x=n(184),b=function(){var e,l,n,b,f,N,j=(0,p.TH)().state,g=(0,h.cI)({onChange:!0}),y=g.register,Z=(g.reset,g.handleSubmit),S=g.formState.errors,k=(0,o.useRef)(null),w=(0,o.useRef)(null),F=(0,m.Z)(),E=(0,o.useState)(!1),I=(0,t.Z)(E,2),R=I[0],q=I[1],O=(0,o.useState)({}),T=(0,t.Z)(O,2),A=T[0],C=T[1],_=(0,o.useState)({}),M=(0,t.Z)(_,2),P=M[0],G=M[1],J="SIGNUP_FORM",X="USER_TYPES_FORM",z="PATIENT_FORM",U="ORGANIZATION_FORM",H=(0,o.useState)(J),L=(0,t.Z)(H,2),D=L[0],V=L[1],Y=(0,o.useState)({fullName:"",phone:"",age:"",gender:""}),B=(0,t.Z)(Y,2),K=B[0],Q=B[1],W=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(l){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=4;break}return F.error("Enter number"),e.abrupt("return");case 4:return e.next=6,u.be.post("/signup",(0,i.Z)((0,i.Z)({},K),{},{phone:l}));case 6:n=e.sent,s=n.data,C(null===s||void 0===s?void 0:s.user),Q((0,i.Z)((0,i.Z)({},K),{},{phone:l})),q(!0),411===(null===s||void 0===s?void 0:s.status_code)?F.error(null===s||void 0===s?void 0:s.message):F.success(null===s||void 0===s?void 0:s.message),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),F.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(l){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var l,n,i,s,t,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/validate-otp",{otp:w.current.value,userId:null===A||void 0===A?void 0:A._id});case 3:s=e.sent,t=s.data,localStorage.setItem("user",JSON.stringify(null===t||void 0===t?void 0:t.user)),localStorage.setItem("token",JSON.stringify(null===t||void 0===t?void 0:t.token)),null!==t&&void 0!==t&&null!==(l=t.user)&&void 0!==l&&null!==(n=l.twoFactor)&&void 0!==n&&n.isVerified&&null!==t&&void 0!==t&&null!==(i=t.user)&&void 0!==i&&i.isActive?null!==j&&void 0!==j&&j.redirectTo?window.location.replace(j.redirectTo):window.location.replace(null===(o=v._A[null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.userType])||void 0===o?void 0:o.path):V(X),F.success(null===t||void 0===t?void 0:t.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),F.error(null===e.t0||void 0===e.t0?void 0:e.t0.message),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(l){var n,i,s,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.be.post("/common/set-usertype",{type:l,userId:A._id,organizationId:null===A||void 0===A?void 0:A.organizationId},(0,u.Ek)());case 3:s=e.sent,t=s.data,G(l),localStorage.setItem("user",JSON.stringify(null===t||void 0===t?void 0:t.user)),"patient"===l?V(z):["hospital","clinic"].includes(l)?V(U):window.location.replace(null===(n=v._A[null===t||void 0===t||null===(i=t.user)||void 0===i?void 0:i.userType])||void 0===n?void 0:n.path),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(l){return e.apply(this,arguments)}}(),le=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(l){var n,i,s,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.phone=A.phone,!["hospital","clinic"].includes(l.source)){e.next=10;break}return e.next=5,u.be.post("common/create-hospital",l,(0,u.Ek)());case 5:n=e.sent,null!==(i=n.data)&&void 0!==i&&i.isActive&&(localStorage.setItem("user",JSON.stringify(null===i||void 0===i?void 0:i.organization)),window.location.reload()),e.next=17;break;case 10:if("patient"!==l.source){e.next=17;break}return l._id=null===A||void 0===A?void 0:A._id,e.next=14,u.be.post("/patient/patient-details",l,(0,u.Ek)());case 14:s=e.sent,null!==(t=s.data)&&void 0!==t&&t.isActive&&(localStorage.setItem("user",JSON.stringify(null===t||void 0===t?void 0:t.user)),null!==j&&void 0!==j&&j.redirectTo?window.location.replace(j.redirectTo):window.location.replace("/patient"));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(l){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{style:{backgroundImage:"url(".concat(a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},className:"loginContainer",children:[D===J&&(0,x.jsxs)("div",{className:"loginform col-3 d-flex flex-column",children:[(0,x.jsx)("span",{className:"h2 text-light mb-3",children:"LogIn / Sign Up"}),R?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mobile",children:[(0,x.jsx)("p",{className:"mb-1 text-disabled",children:"Mobile Number"}),(0,x.jsxs)("h3",{children:["+91 ","".concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(0,2),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(2,4),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(4,6),"-").concat(String((null===K||void 0===K?void 0:K.phone)||"").slice(6,10)),(0,x.jsx)("span",{children:(0,x.jsx)(c.G,{onClick:function(){q(!1)},className:"cursor-pointer medit ml-1 text",icon:d.Xcf})})]})]}),(0,x.jsxs)("div",{className:"otp mt-2",children:[(0,x.jsx)("label",{htmlFor:"",className:"text-disabled",children:"Enter the OTP"}),(0,x.jsx)("input",{className:"form-control mt-2 letterSpcing",type:"number",name:"OTP",id:"",placeholder:"X X X X",ref:w}),(0,x.jsx)("button",{onClick:$,className:"btn btn-light btn1 mt-4",children:"Log In"})]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"Phone",children:"Mobile Number"}),(0,x.jsx)("input",{id:"Phone",className:"form-control mb-2 letterSpcing",type:"number",pattern:"###-###-####",placeholder:"822992255",ref:k,onChange:u.y4}),(0,x.jsx)("span",{children:(0,x.jsx)("button",{onClick:function(){return W(k.current.value)},className:"btn btn-light btn1",children:"Submit"})})]})]}),D===X&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details ",children:[(0,x.jsx)("h4",{className:"py-3",children:"Select Anyone "}),(0,x.jsxs)("div",{className:"col-3 d-flex flex-row justify-content-center",children:[(0,x.jsx)("div",{className:"col p-4 cursor-pointer",style:{border:"1px solid white",borderRadius:"5px"},onClick:function(){return ee("hospital")},children:"Hospital"}),(0,x.jsx)("div",{className:"col p-4 mx-3 cursor-pointer",style:{border:"1px solid white",borderRadius:"5px"},onClick:function(){return ee("clinic")},children:"Clinic"}),(0,x.jsx)("div",{className:"col p-4 cursor-pointer",style:{border:"1px solid white",borderRadius:"5px"},onClick:function(){return ee("patient")},children:"Patient"})]})]}),(0,x.jsxs)("form",{onSubmit:Z(le),children:[D===z&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,x.jsx)("h3",{className:"mb-3",children:"Fill your Details"}),(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,x.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===K||void 0===K||null===(e=K.phone)||void 0===e?void 0:e.slice(0,3),"-",null===K||void 0===K||null===(l=K.phone)||void 0===l?void 0:l.slice(3,6),"-",null===K||void 0===K||null===(n=K.phone)||void 0===n?void 0:n.slice(-4)]})]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("input",(0,i.Z)({type:"hidden",value:"patient"},y("source"))),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Full Name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.fullName?"border-danger":""),placeholder:"Enter Full name"},y("fullName",{required:"name is required"})))]})]}),(0,x.jsxs)("div",{className:"col-12 d-flex flex-row",children:[(0,x.jsxs)("div",{className:"col-6 me-2",children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Age"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.age?"border-danger":""),placeholder:"Enter age"},y("age",{required:"age is required"})))]}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Gender"}),(0,x.jsxs)("select",(0,i.Z)((0,i.Z)({style:{padding:".475rem .75rem"},className:"form-control mb-2 col-2 w-100  ".concat(null!==S&&void 0!==S&&S.age?"border-danger":"")},y("gender",{required:"Gender is required"})),{},{children:[(0,x.jsx)("option",{value:"male",children:"Male"}),(0,x.jsx)("option",{value:"female",children:"Female"}),(0,x.jsx)("option",{value:"other",children:"Other"})]}))]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"",children:"Father name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ",placeholder:"Enter Full name"},y("fatherName")))]}),(0,x.jsxs)("div",{className:" mb-3",children:[(0,x.jsx)("label",{className:"mb-2",htmlFor:"",children:"Address"}),(0,x.jsx)("input",(0,i.Z)({type:"text",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.address?"border-danger":""),placeholder:"Enter Address"},y("address",{required:"address is required"})))]}),(0,x.jsx)("button",{className:"btn btn1 btn-info",type:"submit",children:"Save"})]}),D===U&&(0,x.jsxs)("div",{className:"loginform mt-0 user-details col-3 d-flex flex-column",children:[(0,x.jsx)("h3",{className:"mb-3",children:"Fill your details"}),(0,x.jsxs)("div",{className:"mb-2",children:[(0,x.jsx)("label",{htmlFor:"",children:"Mobile Number"}),(0,x.jsxs)("h4",{className:"mb-2 text-disabled",children:["+91 ",null===K||void 0===K||null===(b=K.phone)||void 0===b?void 0:b.slice(0,3),"-",null===K||void 0===K||null===(f=K.phone)||void 0===f?void 0:f.slice(3,6),"-",null===K||void 0===K||null===(N=K.phone)||void 0===N?void 0:N.slice(-4)]})]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("div",{children:(0,x.jsx)("input",(0,i.Z)({type:"hidden",value:P,placeholder:"Enter Registration No."},y("source")))}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-2",children:"Registration No."}),(0,x.jsx)("input",(0,i.Z)({type:"text",name:"registration no",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.registrationNo?"border-danger":""),placeholder:"Enter Registration No."},y("registrationNo",{required:"Email is required"})))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"mb-2",children:"Name"}),(0,x.jsx)("input",(0,i.Z)({type:"text",name:"name",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.name?"border-danger":""),placeholder:"Enter Full name"},y("name",{required:"Email is required"})))]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"",className:"mb-2",children:"Email"}),(0,x.jsx)("input",(0,i.Z)({type:"email",name:"email",className:"form-control mb-2 ".concat(null!==S&&void 0!==S&&S.email?"border-danger":""),placeholder:"Enter Email"},y("email",{required:"Email is required"})))]}),(0,x.jsx)("button",{className:"btn btn-primary btn-md shadow-none",type:"submit",children:"Save"})]})]})]})]})}}}]);
//# sourceMappingURL=540.f323de85.chunk.js.map